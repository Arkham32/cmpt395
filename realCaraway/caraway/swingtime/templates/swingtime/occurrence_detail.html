{% extends "baseswingtime.html" %}
{% block title %}Event Occurrence{% endblock %}
{% block main_content %}
{% load staticfiles %}
<!doctype html>

<head>
    <!--bootstrap.css
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
    <link rel="stylesheet" href="{% static 'login/tile.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    -->
</head>

<SCRIPT LANGUAGE="JavaScript">
    <!--
    function replaceButtonText(buttonId, text)
    {
      if (document.getElementById)
      {
        var button=document.getElementById(buttonId);
        if (button)
        {
          if (button.childNodes[0])
          {
            button.childNodes[0].nodeValue=text;
          }
          else if (button.value)
          {
            button.value=text;
          }
          else //if (button.innerHTML)
          {
            button.innerHTML=text;
          }
        }
      }
    }
    //-->
    </SCRIPT>

{% if user.request.is_superuser %}
     <h3>Swingtime Event Occurrence</h3>
     <h4>
         <a href="{{ occurrence.event.get_absolute_url }}">{{ occurrence.title }}</a>
         &ndash;
         {% with occurrence.start_time as st  %}
         <a href="{% url 'swingtime-daily-view' st.year st.month st.day %}">
            {{ st|date:"l, F jS P" }}</a>
        </h4>
        {% endwith %}
     <dl>
         <dt>Event type:</dt>
         <dd>{{ occurrence.event.event_type }}</dd>
         
         <dt>Description:</dt>
         <dd>{{ occurrence.event.description|default:"None" }}</dd>
         
         <dt>Note(s:)</dt>
         <dd>
             {% with occurrence.event.notes.all as notes %}
             {% if notes %}
             <ul>
                 {% for note in notes %}
                 <li>{{ note }}</li>
                 {% endfor %}
             </ul>
             {% else %}None
             {% endif %}
             {% endwith %}
         </dd>
     </dl>
     
     <form action="" method="post">{% csrf_token %}
     <table>
         <tfoot>
             <tr>
                 <td colspan="2"><input type="submit" value="Update" /></td>
             </tr>
         </tfoot>
         <tbody>
             {{ form }}
         </tbody>
     </table>
     </form>
{% else %}
    {% for x in Volunteer %}
        {% if x.title == occurrence.title%}
            <div>
            <h4> Current Timeslots available: {{ x.slots }} </h4>
            <button id = "slot1" type="button" class="btn btn-primary" onclick = ''>slot1</button>

            <button type="button" class="btn btn-primary">Slot 2</button>
            <button type="button" class="btn btn-primary">Slot 3</button>
            </div>
            <h4>Start Time: {{ start }}</h4>
            <h4>End Time: {{ end }}</h4>
        {% endif %}
    {% endfor %}
    <br>
    <br>
    <button type="submit" onclick="">Sign up</button>

{% endif %}

{% endblock %}
